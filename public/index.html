<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/menu.css" />
  <link rel="stylesheet" href="/css/servicios.css" />
  <link rel="stylesheet" href="/css/inicio.css" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <title>Iyayku – Innova Editores</title>
</head>
<body class="bg-blue-800 text-white font-sans">

  <!-- HEADER -->
  <header class="bg-white text-black flex flex-wrap items-center justify-between px-6 py-4 shadow-md">
    <!-- LOGO -->
    <div class="logo flex-shrink-0">
      <img src="/img/logo" alt="Logo" class="h-8 object-contain" />
    </div>
    <!-- Botón hamburguesa -->
    <button id="menu-toggle" aria-label="Abrir menú">&#9776;</button>
    <!-- MENÚ -->
    <nav id="main-menu" class="w-full md:w-auto md:flex md:items-center mt-4 md:mt-0 hidden md:block">
      <ul class="flex flex-col md:flex-row gap-4 letras_menu w-full md:w-auto">
        <li><a href="/index.html" class="hover-effect block py-2 px-4">Inicio</a></li>
        <li><a href="/Pages/nosotros.html" class="hover-effect block py-2 px-4">Nosotros</a></li>
        <li><a href="/Pages/editorial.html" class="hover-effect block py-2 px-4">Editorial</a></li>
        <li><a href="/Pages/servicios.html" class="hover-effect block py-2 px-4">Servicios</a></li>
        <li><a href="/Pages/contacto.html" class="hover-effect block py-2 px-4">Contáctanos</a></li>
      </ul>
    </nav>
    
    
    <div class="social-icons">
      <a href="/Pages/registro_login.html" title="Iniciar sesión o registrarse">
        <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center hover:bg-blue-500 transition">
          <img src="/svg/usuario" alt="User" class="h-5 w-5 hover:scale-110 transition" />
        </div>
      </a>
      <!-- WhatsApp -->
      <a href="https://api.whatsapp.com/send?phone=593997000496&text=%C2%A1Hola%20Iyayku%20Innova%20Editores!%20me%20gustar%C3%ADa%20saber%20m%C3%A1s%20informaci%C3%B3n%20acerca%20de%20la%20asesor%C3%ADa%20y%20publicaci%C3%B3n%20de%20art%C3%ADculos%20cient%C3%ADficos.%20%E2%9C%8D%EF%B8%8F%F0%9F%93%8A%F0%9F%93%9D"
          target="_blank" rel="noopener noreferrer">
          <img src="/svg/whatsapp" alt="WhatsApp" class="h-5 w-5 hover:scale-110 transition" />
      </a>

      <!-- Facebook -->
      <a href="https://www.facebook.com/Iyaykutec" target="_blank" rel="noopener noreferrer">
          <img src="/svg/facebook" alt="Facebook" class="h-5 w-5 hover:scale-110 transition" />
      </a>

      <!-- Instagram -->
      <a href="https://www.instagram.com/iyaykutec" target="_blank" rel="noopener noreferrer">
          <img src="/svg/instagram" alt="Instagram" class="h-5 w-5 hover:scale-110 transition" />
      </a>

      <!-- Buscar -->
      <a id="searchToggle" class="cursor-pointer">
          <img src="/svg/lupa" alt="Buscar" class="h-5 w-5 hover:scale-110 transition" />
      </a>

      <!-- Campo de búsqueda oculto -->
      <input id="searchInput" type="text" placeholder="Buscar certificados por autor o título..."
          class="hidden ml-2 px-2 py-1 rounded border border-gray-300 shadow text-black transition-all duration-300" />
  </div>

  </header>
  <!-- Resultados de búsqueda de certificados -->
  <div id="resultados-busqueda" style="max-width:700px;margin:30px auto 0 auto;"></div>

  <!-- LOGIN STATUS BANNER -->
  <div id="login-status-banner" style="display:none;position:fixed;top:0;right:0;z-index:9999;background:#3498db;color:#fff;padding:8px 18px;border-radius:0 0 0 12px;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.10);">
    <span id="login-status-text"></span>
    <a id="perfil-link" href="/Pages/perfil.html" style="color:#fff;text-decoration:underline;margin-left:10px;display:none;">Ir a perfil</a>
  </div>

  <!-- MAIN -->
  <main>
    <div id="contenido-dinamico"></div>

    <section class="servicios-dos-columnas">

    <div class="columna">
      <h2>Consultoría y soluciones empresariales digitales</h2>
      <ul>
        <li>Diseño y desarrollo de sitios web funcionales y creativos</li>
        <li>Creación de aplicaciones móviles para Android y iOS</li>
        <li>Gestión documental y automatización de procesos internos</li>
        <li>Marketing digital orientado a la captación y fidelización</li>
        <li>Inteligencia de negocios y análisis de datos</li>
      </ul>

      <h2>Seguridad informática y ciberseguridad</h2>
      <ul>
        <li>Seguridad en la nube para minimizar riesgos</li>
        <li>Protección integral de usuarios y dispositivos</li>
        <li>Infraestructura de seguridad híbrida</li>
        <li>Diagnóstico de vulnerabilidades y monitoreo</li>
      </ul>
    </div>

    <div class="columna">
      <h2>Capacitación y formación profesional continua</h2>
      <ul>
        <li>Ciberseguridad: hacking ético, seguridad forense</li>
        <li>Investigación académica y publicación científica</li>
        <li>Educación virtual e inteligencia artificial aplicada</li>
        <li>Marketing político, atención al cliente y más</li>
      </ul>

      <h2>Asesoría académica, científica y editorial</h2>
      <ul>
        <li>Gestión de proyectos de investigación</li>
        <li>Publicación de artículos en Scopus, Scielo, etc.</li>
        <li>Creación y publicación de libros con ISBN</li>
        <li>Asesoría para crear e indexar revistas científicas</li>
      </ul>
    </div>
  </section>


  </main>
 <footer class="footer">
      <div class="footer-col">
        <h3>Dirección</h3>
        <p>Dirección: Av. Amazonas y Colón, Quito – Ecuador</p>
      </div>

      <div class="footer-col">
        <h3>Síguenos</h3>
        <div class="footer-socials">
          <a href="https://api.whatsapp.com/send?phone=593997000496&text=%C2%A1Hola%20Iyayku%20Innova%20Editores!%20me%20gustar%C3%ADa%20saber%20m%C3%A1s%20informaci%C3%B3n%20acerca%20de%20la%20asesor%C3%ADa%20y%20publicaci%C3%B3n%20de%20art%C3%ADculos%20cient%C3%ADficos.%20%E2%9C%8D%EF%B8%8F%F0%9F%93%8A%F0%9F%93%9D" target="_blank" rel="noopener noreferrer">
            <img src="/svg/whatsapp" alt="WhatsApp" />
          </a>
          <a href="https://www.facebook.com/Iyaykutec" target="_blank" rel="noopener noreferrer">
            <img src="/svg/facebook" alt="Facebook" />
          </a>
          <a href="https://www.instagram.com/iyaykutec" target="_blank" rel="noopener noreferrer">
            <img src="/svg/instagram" alt="Instagram" />
          </a>
        </div>
      </div>

      <div class="footer-col">
        <h3>Información</h3>
        <p>Email: iyayku@gmail.com</p>
        <p>Teléfonos: 0995000484 · 0979369650 · 0997000496</p>
      </div>
    </footer>
  <script src="/scripts/cargaImagenes.js"></script>
  <script src="/script.js"></script>
  <script>
  // Búsqueda flexible de certificados desde la lupa
  (function() {
    let certificados = [];
    let certificadosCargados = false;
    const searchToggle = document.getElementById('searchToggle');
    const searchInput = document.getElementById('searchInput');
    const resultadosDiv = document.getElementById('resultados-busqueda');

    async function cargarCertificados() {
      if (certificadosCargados) return;
      try {
        const response = await fetch('/api/certificados-todos');
        certificados = await response.json();
        certificadosCargados = true;
      } catch (err) {
        certificados = [];
        certificadosCargados = true;
      }
    }

    function buscarCertificadosFlexible(searchTerm) {
      const term = searchTerm.trim().toLowerCase();
      if (!term) {
        resultadosDiv.innerHTML = '';
        return;
      }
      const resultados = certificados.filter(cert =>
        (cert.autor_nombre && cert.autor_nombre.toLowerCase().includes(term)) ||
        (cert.articulo_titulo && cert.articulo_titulo.toLowerCase().includes(term))
      );
      mostrarResultadosCertificados(resultados);
    }

    function mostrarResultadosCertificados(resultados) {
      resultadosDiv.innerHTML = '';
      if (resultados.length === 0) {
        resultadosDiv.innerHTML = '<p style="background:#fff;color:#222;padding:1em;border-radius:8px;">No se encontraron certificados.</p>';
        return;
      }
      resultados.forEach(cert => {
        const card = document.createElement('div');
        card.className = 'tarjeta-resultado';
        card.style = 'background: #fff; color: #222; margin-bottom: 1rem; padding: 1rem; border-radius: 8px;';
        const certTitulo = document.createElement('h3');
        certTitulo.textContent = cert.articulo_titulo || cert.titulo || '';
        const certAutor = document.createElement('p');
        certAutor.textContent = `Autor: ${cert.autor_nombre || cert.autor || ''}`;
        const certLink = document.createElement('a');
        certLink.href = cert.articulo_url || cert.archivo_url || '#';
        certLink.textContent = 'Ver Certificado';
        certLink.style = 'cursor:pointer; color:blue; text-decoration:underline;';
        certLink.target = '_blank';
        card.appendChild(certTitulo);
        card.appendChild(certAutor);
        card.appendChild(certLink);
        resultadosDiv.appendChild(card);
      });
    }

    if (searchToggle && searchInput) {
      searchToggle.addEventListener('click', () => {
        searchToggle.style.display = 'none';
        searchInput.classList.remove('hidden');
        searchInput.focus();
      });
      searchInput.addEventListener('blur', () => {
        searchInput.classList.add('hidden');
        searchToggle.style.display = 'inline-block';
        setTimeout(() => { resultadosDiv.innerHTML = ''; }, 200);
      });
      searchInput.addEventListener('keydown', async (e) => {
        if (e.key === 'Escape') {
          searchInput.classList.add('hidden');
          searchToggle.style.display = 'inline-block';
          resultadosDiv.innerHTML = '';
        }
        if (e.key === 'Enter') {
          e.preventDefault();
          await cargarCertificados();
          buscarCertificadosFlexible(searchInput.value);
        }
      });
    }
  })();
  </script>
  <script>
    // Menú hamburguesa responsive
    document.addEventListener('DOMContentLoaded', function() {
      var menuToggle = document.getElementById('menu-toggle');
      var mainMenu = document.getElementById('main-menu');
      menuToggle.addEventListener('click', function() {
        mainMenu.classList.toggle('open');
      });
    });
    // Mostrar banner de login si está logueado
    document.addEventListener('DOMContentLoaded', function() {
      fetch('/api/status', { credentials: 'include' })
        .then(res => res.json())
        .then(data => {
          if (data.usuario && data.usuario.correo) {
            const banner = document.getElementById('login-status-banner');
            const text = document.getElementById('login-status-text');
            const perfilLink = document.getElementById('perfil-link');
            text.textContent = `Sesión iniciada: ${data.usuario.nombre || data.usuario.correo}`;
            // Solo mostrar el link a perfil si es admin
            if (data.usuario.correo === 'admin@iyayku.com') {
              perfilLink.style.display = '';
            } else {
              perfilLink.style.display = 'none';
            }
            banner.style.display = '';
          }
        });
    });
  </script>
</body>
</html>
</html>
